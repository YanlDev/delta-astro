---
// TurnitinForm.astro - Optimizado para m√≥vil
---

<section id="formulario-turnitin" class="py-12 bg-slate-800 relative overflow-hidden">
  <!-- Elementos decorativos simplificados -->
  <div class="absolute inset-0 opacity-5">
    <div class="absolute top-1/4 -right-24 w-96 h-96 bg-blue-500 rounded-full mix-blend-multiply blur-2xl"></div>
    <div class="absolute bottom-0 -left-24 w-72 h-72 bg-indigo-500 rounded-full mix-blend-multiply blur-2xl"></div>
  </div>

  <div class="container mx-auto px-4 relative z-10 max-w-2xl">
    <!-- Encabezado compacto -->
    <div class="text-center mb-8">
      <h2 class="text-2xl md:text-3xl font-bold text-white mb-2">Revisi√≥n Turnitin</h2>
      <p class="text-gray-300 text-sm">Reporte en 5 minutos</p>
      <div class="w-16 h-1 bg-gradient-to-r from-blue-600 to-indigo-600 mx-auto mt-4"></div>
    </div>

    <!-- Indicador de pasos -->
    <div class="flex justify-center mb-8">
      <div class="flex space-x-2">
        <div class="step-indicator active bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium" data-step="1">1</div>
        <div class="step-indicator bg-slate-700 text-gray-400 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium" data-step="2">2</div>
        <div class="step-indicator bg-slate-700 text-gray-400 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium" data-step="3">3</div>
        <div class="step-indicator bg-slate-700 text-gray-400 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium" data-step="4">4</div>
      </div>
    </div>

    <!-- Formulario por pasos -->
    <div class="bg-slate-900/80 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6">
      <form id="turnitinForm">

        <!-- Paso 1: Informaci√≥n Personal -->
        <div class="form-step block" data-step="1">
          <h3 class="text-lg font-semibold text-white mb-6 flex items-center">
            <span class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-sm mr-3">1</span>
            Informaci√≥n Personal
          </h3>
          
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2">Nombre Completo *</label>
              <input 
                type="text" 
                id="fullName" 
                name="fullName" 
                required
                class="w-full px-4 py-3 bg-slate-800/50 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                placeholder="Ej: Juan Carlos P√©rez L√≥pez"
              />
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2">WhatsApp *</label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                required
                class="w-full px-4 py-3 bg-slate-800/50 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                placeholder="999 888 777"
              />
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2">Email *</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                required
                class="w-full px-4 py-3 bg-slate-800/50 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                placeholder="tu@email.com"
              />
            </div>
          </div>

          <button type="button" class="next-btn w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition-all">
            Continuar ‚Üí
          </button>
        </div>

        <!-- Paso 2: Tipo de Servicio -->
        <div class="form-step hidden" data-step="2">
          <h3 class="text-lg font-semibold text-white mb-6 flex items-center">
            <span class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-sm mr-3">2</span>
            Selecciona tu servicio
          </h3>

          <div class="space-y-4">
            <button type="button" class="report-option w-full p-4 bg-slate-800/50 border-2 border-slate-600 rounded-lg text-left transition-all hover:border-blue-500" data-value="unico" data-files="1">
              <div class="flex justify-between items-center">
                <div>
                  <div class="text-white font-semibold">Reporte √önico</div>
                  <div class="text-gray-400 text-sm">1 documento</div>
                </div>
                <div class="text-2xl font-bold text-blue-400">S/7</div>
              </div>
            </button>

            <button type="button" class="report-option w-full p-4 bg-slate-800/50 border-2 border-slate-600 rounded-lg text-left transition-all hover:border-purple-500 relative" data-value="pack" data-files="3">
              <div class="absolute -top-2 -right-2 bg-pink-500 text-white px-2 py-1 rounded-full text-xs">M√°s Popular</div>
              <div class="flex justify-between items-center">
                <div>
                  <div class="text-white font-semibold">Pack 3 Reportes</div>
                  <div class="text-gray-400 text-sm">3 documentos diferentes</div>
                  <div class="text-green-400 text-xs font-medium">Ahorro 28%</div>
                </div>
                <div class="text-2xl font-bold text-purple-400">S/15</div>
              </div>
            </button>
          </div>

          <div class="flex space-x-4 mt-6">
            <button type="button" class="prev-btn flex-1 bg-slate-700 hover:bg-slate-600 text-white font-medium py-3 rounded-lg transition-all">
              ‚Üê Anterior
            </button>
            <button type="button" class="next-btn flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition-all opacity-50 cursor-not-allowed" disabled>
              Continuar ‚Üí
            </button>
          </div>
        </div>

        <!-- Paso 3: Subir Documentos -->
        <div class="form-step hidden" data-step="3">
          <h3 class="text-lg font-semibold text-white mb-6 flex items-center">
            <span class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-sm mr-3">3</span>
            Subir <span id="file-count-text">documento</span>
          </h3>

          <!-- Input de archivos -->
          <div id="file-upload-container">
            <input 
              type="file" 
              id="documents" 
              name="documents" 
              accept=".doc,.docx,.pdf" 
              required
              class="hidden"
            />
            <label for="documents" class="file-drop-zone block w-full p-8 border-2 border-dashed border-slate-600 rounded-lg text-center cursor-pointer transition-all hover:border-blue-500 hover:bg-slate-800/30">
              <div class="text-4xl mb-4">üìÑ</div>
              <div class="text-white font-medium mb-2">Toca para seleccionar <span id="files-needed">archivo</span></div>
              <div class="text-gray-400 text-sm">DOC, DOCX, PDF (m√°x. 10MB cada uno)</div>
            </label>
          </div>

          <!-- Preview de archivos -->
          <div id="files-preview" class="space-y-3 mt-4 hidden"></div>

          <div class="flex space-x-4 mt-6">
            <button type="button" class="prev-btn flex-1 bg-slate-700 hover:bg-slate-600 text-white font-medium py-3 rounded-lg transition-all">
              ‚Üê Anterior
            </button>
            <button type="button" class="next-btn flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition-all opacity-50 cursor-not-allowed" disabled>
              Continuar ‚Üí
            </button>
          </div>
        </div>

        <!-- Paso 4: Env√≠o y Comprobante -->
        <div class="form-step hidden" data-step="4">
          <h3 class="text-lg font-semibold text-white mb-6 flex items-center">
            <span class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-sm mr-3">4</span>
            Finalizar
          </h3>

          <!-- M√©todo de entrega -->
          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-300 mb-3">¬øC√≥mo quieres recibir tu reporte?</label>
            <div class="space-y-3">
              <button type="button" class="delivery-option w-full p-4 bg-slate-800/50 border-2 border-slate-600 rounded-lg text-left transition-all hover:border-green-500" data-value="whatsapp">
                <div class="flex items-center">
                  <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center mr-3">
                    <span class="text-white text-sm">üì±</span>
                  </div>
                  <div>
                    <div class="text-white font-medium">WhatsApp</div>
                    <div class="text-gray-400 text-sm">M√°s r√°pido</div>
                  </div>
                </div>
              </button>

              <button type="button" class="delivery-option w-full p-4 bg-slate-800/50 border-2 border-slate-600 rounded-lg text-left transition-all hover:border-blue-500" data-value="email">
                <div class="flex items-center">
                  <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                    <span class="text-white text-sm">üìß</span>
                  </div>
                  <div>
                    <div class="text-white font-medium">Email</div>
                    <div class="text-gray-400 text-sm">M√°s formal</div>
                  </div>
                </div>
              </button>
            </div>
          </div>

          <!-- Comprobante de pago -->
          <div id="payment-upload-container" class="hidden mb-6">
            <label class="block text-sm font-medium text-gray-300 mb-3">Comprobante de pago</label>
            <input 
              type="file" 
              id="payment" 
              name="payment" 
              accept="image/*" 
              required
              class="hidden"
            />
            <label for="payment" class="payment-drop-zone block w-full p-6 border-2 border-dashed border-slate-600 rounded-lg text-center cursor-pointer transition-all hover:border-pink-500 hover:bg-slate-800/30">
              <div class="text-3xl mb-3">üì∑</div>
              <div class="text-white font-medium mb-2">Subir comprobante</div>
              <div class="text-gray-400 text-sm">Captura de pantalla o foto</div>
            </label>
            <div id="payment-preview" class="mt-3 hidden"></div>
          </div>

          <!-- Mensaje opcional -->
          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-300 mb-2">Mensaje adicional (opcional)</label>
            <textarea 
              id="message" 
              name="message" 
              rows="3"
              class="w-full px-4 py-3 bg-slate-800/50 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none"
              placeholder="¬øAlguna instrucci√≥n especial?"
            ></textarea>
          </div>

          <div class="flex space-x-4">
            <button type="button" class="prev-btn flex-1 bg-slate-700 hover:bg-slate-600 text-white font-medium py-3 rounded-lg transition-all">
              ‚Üê Anterior
            </button>
            <button type="submit" class="submit-btn flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-3 rounded-lg transition-all opacity-50 cursor-not-allowed" disabled>
              Enviar Solicitud
            </button>
          </div>
        </div>

      </form>
    </div>

    <!-- Resumen -->
    <div id="summary" class="mt-6 bg-blue-900/20 border border-blue-700/30 rounded-lg p-4 hidden">
      <h4 class="text-white font-medium mb-2">üìã Resumen de tu solicitud:</h4>
      <div id="summary-content" class="text-sm text-gray-300"></div>
    </div>
  </div>
</section>

<!-- Scripts separados como en tu estructura -->
<script type="module" src="/src/scripts/turnitin-form.js"></script>

<style>
  .form-step.active {
    display: block;
  }
  
  .step-indicator.active {
    background-color: rgb(59 130 246);
    color: white;
  }
  
  .step-indicator.completed {
    background-color: rgb(34 197 94);
    color: white;
  }

  .report-option.selected {
    border-color: rgb(59 130 246);
    background-color: rgba(29 78 216, 0.3);
  }

  .delivery-option.selected {
    border-color: rgb(34 197 94);
    background-color: rgba(21 128 61, 0.3);
  }

  .file-item {
    background-color: rgba(30 41 59, 0.5);
    border: 1px solid rgb(71 85 105);
    border-radius: 0.5rem;
    padding: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .next-btn:disabled,
  .submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
</style>